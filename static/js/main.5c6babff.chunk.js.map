{"version":3,"sources":["images/logo-min.svg","images/logo-max.svg","images/avatar-bg.png","images/info-tool-tip-success.svg","images/info-tool-tip-failure.svg","components/NavBar.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","hooks/useFormValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","components/Register.js","components/Login.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/api.js","utils/auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","NavBar","signOut","email","isOpenNav","className","onClick","Header","loggedIn","userData","authState","onSignOut","React","useState","setIsOpenNav","href","media","srcSet","headerLogoMin","src","headerLogoMax","alt","type","to","CurrentUserContext","createContext","Card","link","name","_id","likes","owner","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","isLiked","some","i","id","title","length","Loader","Main","props","avatar","avatarBg","data-button","onEditAvatar","onEditProfile","about","onAddPlace","isLoading","cards","map","card","key","Footer","ImagePopup","isOpen","onClose","PopupWithForm","children","onSubmit","action","data-form","method","noValidate","useFormValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","evt","target","value","validationMessage","closest","checkValidity","EditProfilePopup","onUpdateUser","useEffect","e","preventDefault","placeholder","minLength","maxLength","required","pattern","onChange","disabled","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","avatarUrl","ref","AddPlacePopup","ConfirmPopup","Register","onRegister","onAuthState","password","Login","onLogin","InfoTooltip","isSuccess","success","failure","ProtectedRoute","Component","component","api","baseUrl","apiKey","this","_baseUrl","_autorization","fetch","headers","authorization","then","res","ok","json","Promise","reject","status","body","JSON","stringify","cardId","BASE_URL","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isConfirmPopupOpen","setConfirmPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setCardId","setIsLoading","isLoadingLoader","setIsLoadingLoader","isImgPopupOpen","setImgPopupOpen","setLoggedIn","setUserData","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setIsSuccess","setAuthState","history","useHistory","handleEscClose","closeAllPopups","document","removeEventListener","handleRegisterConfirm","state","addEventListener","tokenCheck","token","jwt","localStorage","getItem","Error","data","push","catch","err","console","log","handleAuthState","all","getUserInfo","getInitialCards","user","finally","Provider","removeItem","exact","path","likeCard","newCard","newCards","c","auth","setItem","setUserInfo","setNewCard","setUserAvatar","deleteCard","filter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.5c6babff.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-min.0fce8a33.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-max.94cbab21.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4AQMAAAADqqSRAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAABZJREFUOMtjGAWjYBSMglEwCkYB3QEAB4AAAe7tUzsAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/info-tool-tip-success.7fc4c149.svg\";","module.exports = __webpack_public_path__ + \"static/media/info-tool-tip-failure.c32299fa.svg\";","import React from 'react';\r\n\r\nfunction NavBar({signOut, email, isOpenNav}) {\r\n\r\n  return (\r\n    <div className={`navbar ${!isOpenNav ? 'navbar_hide' : ''}`}>\r\n      <ul className=\"navbar__nav\">\r\n        <li><p className=\"navbar__link navbar__user-name\">{email}</p></li>\r\n        <li>\r\n          <button onClick={signOut} className=\"navbar__link navbar__button\">Выйти</button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport headerLogoMin from '../images/logo-min.svg';\r\nimport headerLogoMax from '../images/logo-max.svg';\r\nimport NavBar from \"../components/NavBar\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nfunction Header({ loggedIn, userData, authState, onSignOut }) {\r\n  const [isOpenNav, setIsOpenNav] = React.useState(false);\r\n\r\n  function handleOpen() {\r\n    setIsOpenNav(!isOpenNav);\r\n  }\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header__container\">\r\n        <a href=\"/\" className=\"logo\">\r\n          <picture>\r\n            <source media=\"(max-width: 375px)\" srcSet={headerLogoMin}/>\r\n            <img src={headerLogoMax} alt=\"Логотип\"/>\r\n          </picture>\r\n        </a>\r\n        {loggedIn && <button\r\n          type=\"button\"\r\n          className={`popup__close-icon ${isOpenNav ? 'popup__close-icon_type_open' : 'popup__close-icon_type_close'}`}\r\n          onClick={handleOpen}\r\n        />}\r\n        {!loggedIn && <Link to={authState ? \"/sign-in\" : \"/sign-up\"} className=\"header__link\">\r\n          {authState ? \"Войти\" : \"Регистрация\"}\r\n        </Link>}\r\n      </div>\r\n      {loggedIn && <NavBar signOut={onSignOut} isOpenNav={isOpenNav} email={userData ? userData.email : ''}/>}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({link, name, alt, _id, likes, owner, onCardClick, onCardLike, onCardDelete}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = owner._id === currentUser._id;\r\n  const isLiked = likes.some((i) => i._id === currentUser._id);\r\n\r\n  function handleClick() {\r\n    onCardClick({src: link, title: name, alt: alt});\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike({likes: likes, _id: _id});\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete({_id: _id});\r\n  }\r\n\r\n  return (\r\n    <article className=\"card\">\r\n      <img className=\"card__img\"\r\n           src={link}\r\n           alt={alt || 'Картинка'}\r\n           id={_id}\r\n           onClick={handleClick}/>\r\n      <button type=\"button\"\r\n              className={`card__delete ${isOwn ? 'card__delete_active' : ''}`}\r\n              onClick={handleDeleteClick}/>\r\n      <div className=\"card__info\">\r\n        <h2 className=\"card__title\">{name}</h2>\r\n        <div className=\"card__like-container\">\r\n          <button type=\"button\"\r\n                  className={`card__like ${isLiked ? 'card__like_active' : ''}`}\r\n                  onClick={handleLikeClick}/>\r\n          <p className=\"card__like-counter\">{likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\n\r\nfunction Loader(){\r\n  return (\r\n    <div className=\"loader\"/>\r\n  )\r\n}\r\n\r\nexport default Loader;","import React from 'react';\r\nimport avatarBg from '../images/avatar-bg.png';\r\nimport Card from \"../components/Card\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\nimport Loader from \"../components/Loader\";\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n      <main className=\"content\">\r\n            <section className=\"profile\">\r\n              <div className=\"profile__avatar-container\">\r\n                <img src={currentUser.avatar ? currentUser.avatar : avatarBg}\r\n                     alt=\"Аватар.\" className=\"profile__avatar\"/>\r\n                <div className=\"profile__bg\">\r\n                  <button type=\"button\"\r\n                          className=\"profile__avatar-edit-button\"\r\n                          data-button=\"editAvatar\"\r\n                          onClick={props.onEditAvatar}/>\r\n                </div>\r\n              </div>\r\n              <div className=\"profile__user-info\">\r\n                <div className=\"profile__row\">\r\n                  <h1 className=\"profile__user-name\"\r\n                      id={currentUser._id ? currentUser._id : ''}>{currentUser.name}</h1>\r\n                  <button type=\"button\"\r\n                          className=\"profile__edit-button\"\r\n                          data-button=\"edit\"\r\n                          onClick={props.onEditProfile}/>\r\n                </div>\r\n                <p className=\"profile__user-profession\">{currentUser.about}</p>\r\n              </div>\r\n              <button type=\"button\"\r\n                      className=\"profile__add-button\"\r\n                      data-button=\"add\"\r\n                      onClick={props.onAddPlace}/>\r\n            </section>\r\n            <section className=\"elements\">\r\n              {props.isLoading ? <Loader/> : props.cards.map((card) => (\r\n                <Card key={card._id}{...card}\r\n                      onCardClick={props.onCardClick}\r\n                      onCardLike={props.onCardLike}\r\n                      onCardDelete={props.onCardDelete}/>))}\r\n            </section>\r\n      </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction ImagePopup({isOpen, card, onClose}) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_img ${isOpen ? 'popup_opened' : ''}`}\r\n         id=\"imgPopup\">\r\n      <div className=\"popup__container popup__container_type_img\">\r\n        <img className=\"popup__image\"\r\n             src={card ? card.src : '#'} alt={card ? card.alt : ''}/>\r\n        <h2 className=\"popup__image-title\">{card ? card.title : ''}</h2>\r\n        <button type=\"button\" className=\"popup__close-icon\" onClick={onClose}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction PopupWithForm({isOpen, name, title, onClose, children, onSubmit}) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_form ${isOpen ? 'popup_opened' : ''}`} id={`${name}Popup`}>\r\n      <div className={`popup__container popup__container_type_${name}`}>\r\n        <button type=\"button\" className=\"popup__close-icon\" onClick={onClose}/>\r\n        <h2 className=\"form__title\">{title}</h2>\r\n        <form action=\"#\" onSubmit={onSubmit} className=\"form\" id={`${name}Form`} data-form={name} method=\"get\"\r\n              noValidate>\r\n          {children}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React, {useCallback} from 'react';\r\n\r\nexport const useFormValidation = () => {\r\n  const [values, setValues] = React.useState({});\r\n  const [errors, setErrors] = React.useState({});\r\n  const [isValid, setIsValid] = React.useState(false);\r\n\r\n  const handleChange = (evt) => {\r\n    const target = evt.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: target.validationMessage });\r\n    setIsValid(target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, handleChange, errors, isValid, resetForm };\r\n};\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\nimport {useFormValidation} from '../hooks/useFormValidation';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormValidation();\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser) {\r\n      if(isOpen){\r\n        resetForm(currentUser);\r\n      }\r\n    }\r\n  }, [isOpen, currentUser, resetForm]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(values);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm name=\"edit\"\r\n                   title=\"Редактировать профиль\"\r\n                   isOpen={isOpen}\r\n                   onClose={onClose}\r\n                   onSubmit={handleSubmit}>\r\n      <label className=\"form__label\">\r\n        <input className=\"form__input\"\r\n               type=\"text\"\r\n               name=\"name\"\r\n               placeholder=\"Ваше имя\"\r\n               minLength=\"2\"\r\n               maxLength=\"40\"\r\n               required pattern=\"^[а-яёА-ЯЁa-zA-Z-\\s]+$\"\r\n               id=\"name-input\"\r\n               value={values.name || ''}\r\n               onChange={handleChange}/>\r\n        <span className={`form__input-error ${!isValid ? 'form__input-error_visible' : ''}`}\r\n              id=\"name-input-error\">{errors.name || ''}</span>\r\n      </label>\r\n      <label className=\"form__label\">\r\n        <input className=\"form__input\"\r\n               type=\"text\"\r\n               name=\"about\"\r\n               placeholder=\"Ваша профессия\"\r\n               minLength=\"2\"\r\n               maxLength=\"200\"\r\n               required id=\"profession-input\"\r\n               pattern=\"^[а-яёА-ЯЁa-zA-Z0-9-\\s]+$\"\r\n               value={values.about || ''}\r\n               onChange={handleChange}\r\n        />\r\n        <span className={`form__input-error ${!isValid ? 'form__input-error_visible' : ''}`}\r\n              id=\"profession-input-error\">{errors.about || ''}</span>\r\n      </label>\r\n      <input className={`form__submit-button ${!isValid ? 'form__submit-button_inactive' : ''}`}\r\n             type=\"submit\"\r\n             name=\"submit\"\r\n             disabled={!isValid || isLoading}\r\n             value={`${isLoading ? 'Сохранение' : 'Сохранить'}`}/>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {useFormValidation} from '../hooks/useFormValidation';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n  const avatarRef = React.useRef();\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormValidation();\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, [isOpen, resetForm]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n    avatarRef.current.value = '';\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm name=\"avatar\"\r\n                   title=\"Обновить аватар\"\r\n                   isOpen={isOpen}\r\n                   onClose={onClose}\r\n                   onSubmit={handleSubmit}>\r\n      <label className=\"form__label\">\r\n        <input className=\"form__input\"\r\n               type=\"url\"\r\n               name=\"avatarUrl\"\r\n               placeholder=\"Ссылка на аватар\"\r\n               required\r\n               id=\"avatarUrl-input\"\r\n               value={values.avatarUrl || ''}\r\n               onChange={handleChange}\r\n               ref={avatarRef}\r\n        />\r\n        <span className={`form__input-error ${!isValid ? 'form__input-error_visible' : ''}`}\r\n              id=\"avatarUrl-input-error\">{errors.avatarUrl || ''}</span>\r\n      </label>\r\n      <input className={`form__submit-button ${!isValid ? 'form__submit-button_inactive' : ''}`}\r\n             type=\"submit\"\r\n             name=\"submit\"\r\n             disabled={!isValid || isLoading}\r\n             value={`${isLoading ? 'Сохранение' : 'Сохранить'}`}/>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {useFormValidation} from '../hooks/useFormValidation';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading }) {\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormValidation();\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, [isOpen, resetForm]);\r\n\r\n  function handleAddPlaceSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(values);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm name=\"add\"\r\n                   title=\"Новое место\"\r\n                   isOpen={isOpen}\r\n                   onClose={onClose}\r\n                   onSubmit={handleAddPlaceSubmit}>\r\n      <label className=\"form__label\">\r\n        <input className=\"form__input\"\r\n               type=\"text\"\r\n               name=\"name\"\r\n               placeholder=\"Название\"\r\n               minLength=\"1\"\r\n               maxLength=\"30\"\r\n               required id=\"imgName-input\"\r\n               pattern=\"^[а-яёА-ЯЁa-zA-Z0-9-\\s]+$\"\r\n               value={values.name || ''}\r\n               onChange={handleChange}/>\r\n        <span className={`form__input-error ${!isValid ? 'form__input-error_visible' : ''}`}\r\n              id=\"imgName-input-error\">{errors.name || ''}</span>\r\n      </label>\r\n      <label className=\"form__label\">\r\n        <input className=\"form__input\"\r\n               type=\"url\"\r\n               name=\"link\"\r\n               placeholder=\"Ссылка на картинку\"\r\n               required\r\n               id=\"link-input\"\r\n               value={values.link || ''}\r\n               onChange={handleChange}\r\n        />\r\n        <span className={`form__input-error ${!isValid ? 'form__input-error_visible' : ''}`}\r\n              id=\"link-input-error\">{errors.link || ''}</span>\r\n      </label>\r\n      <input className={`form__submit-button ${!isValid ? 'form__submit-button_inactive' : ''}`}\r\n             type=\"submit\"\r\n             name=\"submit\"\r\n             disabled={!isValid || isLoading}\r\n             value={`${isLoading ? 'Сохранение' : 'Создать'}`}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmPopup({onClose, isOpen, onCardDelete, isLoading}) {\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onCardDelete();\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"confirm\"\r\n      title=\"Вы уверены?\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}>\r\n      <input type=\"submit\"\r\n             className=\"form__submit-button form__submit-button_type_confirm\"\r\n             disabled={isLoading}\r\n             value={`${isLoading ? 'Удаление' : 'Да'}`}/>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {useFormValidation} from '../hooks/useFormValidation';\r\n\r\nfunction Register({ onRegister, name, isLoading, onAuthState }) {\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormValidation();\r\n\r\n  React.useEffect(() => {\r\n    onAuthState(true);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, [resetForm]);\r\n\r\n  function handleRegisterSubmit(e) {\r\n    e.preventDefault();\r\n    if (!values.email || !values.password) {\r\n      return;\r\n    }\r\n    onRegister(values);\r\n  }\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"register\">\r\n        <h2 className=\"register__title\">Регистрация</h2>\r\n        <form action=\"#\"\r\n              onSubmit={handleRegisterSubmit}\r\n              className=\"form form_type_register\"\r\n              id={`${name}Form`}\r\n              data-form={name}\r\n              method=\"post\"\r\n              noValidate>\r\n          <label className=\"form__label\">\r\n            <input className=\"form__input form__input_type_register\"\r\n                   type=\"email\"\r\n                   name=\"email\"\r\n                   placeholder=\"Email\"\r\n                   minLength=\"2\"\r\n                   maxLength=\"40\"\r\n                   required\r\n                   id=\"email-input\"\r\n                   value={values.email || ''}\r\n                   onChange={handleChange}\r\n            />\r\n            <span className={`form__input-error form__input-error_type_register ${!isValid ? 'form__input-error_visible' : ''}`}\r\n                  id=\"email-input-error\">{errors.email || ''}</span>\r\n          </label>\r\n          <label className=\"form__label\">\r\n            <input className=\"form__input form__input_type_register\"\r\n                   type=\"password\"\r\n                   name=\"password\"\r\n                   placeholder=\"Пароль\"\r\n                   minLength=\"2\"\r\n                   maxLength=\"40\"\r\n                   required\r\n                   id=\"password-input\"\r\n                   value={values.password || ''}\r\n                   onChange={handleChange}\r\n            />\r\n            <span className={`form__input-error form__input-error_type_register ${!isValid ? 'form__input-error_visible' : ''}`}\r\n                  id=\"password-input-error\">{errors.password || ''}</span>\r\n          </label>\r\n          <input className={`form__submit-button form__submit-button_type_register ${!isValid ? 'form__submit-button_inactive' : ''}`}\r\n                 type=\"submit\"\r\n                 name=\"submit\"\r\n                 value={`${isLoading ? 'Регистрация' : 'Зарегистрироваться'}`}\r\n                 disabled={!isValid || isLoading}\r\n          />\r\n        </form>\r\n        <div className=\"register__signin\">\r\n          <p className=\"register__question\">Уже зарегистрированы?</p>\r\n          <Link to=\"/sign-in\" className=\"register__login-link\">Войти</Link>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {useFormValidation} from '../hooks/useFormValidation';\r\n\r\nfunction Login({ onLogin, name, isLoading, onAuthState }) {\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormValidation();\r\n\r\n  React.useEffect(() => {\r\n    onAuthState(false);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, [resetForm]);\r\n\r\n  function handleLoginSubmit(e) {\r\n    e.preventDefault();\r\n    if (!values.email || !values.password) {\r\n      return;\r\n    }\r\n    onLogin(values);\r\n  }\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"login\">\r\n        <h2 className=\"login__title\">Вход</h2>\r\n        <form action=\"#\"\r\n              onSubmit={handleLoginSubmit}\r\n              className=\"form form_type_login\"\r\n              id={`${name}Form`}\r\n              data-form={name}\r\n              method=\"post\"\r\n              noValidate>\r\n          <label className=\"form__label\">\r\n            <input className=\"form__input form__input_type_login\"\r\n                   type=\"email\"\r\n                   name=\"email\"\r\n                   placeholder=\"Email\"\r\n                   minLength=\"2\"\r\n                   maxLength=\"40\"\r\n                   required\r\n                   id=\"email-input\"\r\n                   value={values.email || ''}\r\n                   onChange={handleChange}/>\r\n            <span className={`form__input-error form__input-error_type_login ${!isValid ? 'form__input-error_visible' : ''}`}\r\n                  id=\"email-input-error\">{errors.email || ''}</span>\r\n          </label>\r\n          <label className=\"form__label\">\r\n            <input className=\"form__input form__input_type_login\"\r\n                   type=\"password\"\r\n                   name=\"password\"\r\n                   placeholder=\"Пароль\"\r\n                   minLength=\"2\"\r\n                   maxLength=\"40\"\r\n                   required\r\n                   id=\"password-input\"\r\n                   value={values.password || ''}\r\n                   onChange={handleChange}/>\r\n            <span className={`form__input-error form__input-error_type_login ${!isValid ? 'form__input-error_visible' : ''}`}\r\n                  id=\"password-input-error\">{errors.password || ''}</span>\r\n          </label>\r\n          <input\r\n            className={`form__submit-button form__submit-button_type_login ${!isValid ? 'form__submit-button_inactive' : ''}`}\r\n            type=\"submit\"\r\n            name=\"submit\"\r\n            value={`${isLoading ? 'Вход' : 'Войти'}`}\r\n            disabled={!isValid || isLoading}\r\n          />\r\n        </form>\r\n        <div className=\"login__signin\">\r\n          <p className=\"login__question\">Ещё не зарегистрированы?</p>\r\n          <Link to=\"/sign-up\" className=\"login__login-link\">Регистрация</Link>\r\n        </div>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport success from '../images/info-tool-tip-success.svg';\r\nimport failure from '../images/info-tool-tip-failure.svg';\r\n\r\nfunction InfoTooltip({ onClose, isOpen, isSuccess }) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_form ${isOpen ? 'popup_opened' : ''}`} id={'infoTooltipPopup'}>\r\n      <div className={`popup__container popup__container_type_infoTooltip`}>\r\n        <button type=\"button\" className=\"popup__close-icon\" onClick={onClose}/>\r\n        <img src={isSuccess ? success : failure}\r\n             alt={isSuccess ? \"Успешная регистрация.\" : \"Ошибка при регистрации\"}\r\n             className=\"popup__image_type_infoTooltip\"/>\r\n        <h2 className=\"popup__title_type_infoTooltip\">\r\n          {isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import React from 'react';\r\nimport {Redirect, Route} from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route >\r\n      {\r\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"./sign-up\"/>\r\n      }\r\n    </Route>\r\n  )\r\n};\r\n\r\nexport default ProtectedRoute;","class Api {\r\n  constructor({baseUrl, apiKey}) {\r\n    this._baseUrl = baseUrl;\r\n    this._autorization = apiKey;\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: {\r\n        authorization: this._autorization\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: {\r\n        authorization: this._autorization\r\n      }\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  setUserInfo({name, about}) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      });\r\n  }\r\n\r\n  setNewCard({name, link}) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._autorization,\r\n      },\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return (`Карточка с id: ${cardId} удалена`);\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  likeCard(cardId, isLiked) {\r\n    let method = '';\r\n    if (!isLiked) {\r\n      method = 'DELETE';\r\n    } else {\r\n      method = 'PUT';\r\n    }\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: method,\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        _id: cardId\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  setUserAvatar(avatar) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._autorization,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: avatar\r\n      })\r\n    })\r\n      .then(res => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-12',\r\n  apiKey: 'fb1a9012-192e-4e17-8940-fb9d45f05cd7',\r\n});\r\n\r\nexport default api;\r\n","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n    .then((res) => {\r\n      if (res.status !== 400) {\r\n        return res.json();\r\n      }\r\n      throw new Error('Некорректно заполнено одно из полей');\r\n    })\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n    .then(res => {\r\n      if (res.status === 200) {\r\n        return res.json();\r\n      }\r\n      if (res.status === 400) {\r\n        throw new Error('Не передано одно из полей');\r\n      }\r\n      if (res.status === 401) {\r\n        throw new Error('Пользователь с email не найден');\r\n      }\r\n      throw new Error(`Ошибка авторизации: ${res.status}`);\r\n    })\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n    .then((res) => {\r\n      if (res.status === 200) {\r\n        return res.json();\r\n      }\r\n      if (res.status === 400) {\r\n        throw new Error('Токен не передан или передан не в том формате');\r\n      }\r\n      if (res.status === 401) {\r\n        throw new Error('Переданный токен некорректен');\r\n      }\r\n      throw new Error(`Ошибка токена: ${res.status}`);\r\n    })\r\n};","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmPopup from './ConfirmPopup';\r\nimport {Redirect, Route, Switch, useHistory} from 'react-router-dom';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport api from '../utils/api';\r\nimport * as auth from '../utils/auth.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isConfirmPopupOpen, setConfirmPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setCurrentUser] = React.useState({\r\n    name: '',\r\n    about: '',\r\n    avatar: null\r\n  });\r\n  const [cards, setCards] = React.useState([]);\r\n  const [cardId, setCardId] = React.useState(null);\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const [isLoadingLoader, setIsLoadingLoader] = React.useState(false);\r\n  const [isImgPopupOpen, setImgPopupOpen] = React.useState(false);\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [userData, setUserData] = React.useState(null);\r\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\r\n  const [isSuccess, setIsSuccess] = React.useState(false);\r\n  const [authState, setAuthState] = React.useState(false);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    setIsLoadingLoader(true);\r\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n      .then(([user, card]) => {\r\n        setCurrentUser(user);\r\n        setCards(card);\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => setIsLoadingLoader(false))\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    tokenCheck();\r\n  }, [loggedIn]);\r\n\r\n  function handleEscClose(e) {\r\n    if (e.key === 'Escape') {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpen(true);\r\n    document.addEventListener('keydown', handleEscClose);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpen(true);\r\n    document.addEventListener('keydown', handleEscClose);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setEditAvatarPopupOpen(true);\r\n    document.addEventListener('keydown', handleEscClose);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setImgPopupOpen(false);\r\n    setConfirmPopupOpen(false);\r\n    setIsInfoTooltipPopupOpen(false);\r\n    document.removeEventListener('keydown', handleEscClose);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n    setImgPopupOpen(true);\r\n    document.addEventListener('keydown', handleEscClose);\r\n  }\r\n\r\n  function handleUpdateUser({ name, about }) {\r\n    setIsLoading(true);\r\n    api.setUserInfo({ name, about })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    setIsLoading(true);\r\n    api.setUserAvatar(avatar)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleAddPlace({ name, link }) {\r\n    setIsLoading(true);\r\n    api.setNewCard({ name, link })\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    api.likeCard(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function handleConfirm(card) {\r\n    setConfirmPopupOpen(true);\r\n    setCardId(card._id);\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    setIsLoading(true);\r\n    api.deleteCard(cardId)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== cardId);\r\n        setCards(newCards);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleRegisterConfirm(state) {\r\n    setIsInfoTooltipPopupOpen(true);\r\n    setIsSuccess(state);\r\n    document.addEventListener('keydown', handleEscClose);\r\n  }\r\n\r\n  function handleRegister({ email, password }) {\r\n    setIsLoading(true);\r\n    return auth.register(email, password)\r\n      .then(() => {\r\n        handleRegisterConfirm(true);\r\n        history.push('/sign-in');\r\n      })\r\n      .catch((err) => {\r\n        handleRegisterConfirm(false);\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleLogin({ email, password }) {\r\n    setIsLoading(true);\r\n    return auth.authorize(email, password)\r\n      .then((res) => {\r\n        if (res && res.token) {\r\n          localStorage.setItem('jwt', res.token);\r\n          tokenCheck();\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      })\r\n  }\r\n\r\n  function handleSignOut() {\r\n    localStorage.removeItem('jwt');\r\n    history.push('/sign-in');\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  function tokenCheck() {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      auth.getContent(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setUserData({\r\n              id: res.data._id,\r\n              email: res.data.email\r\n            });\r\n            setLoggedIn(true);\r\n            history.push('/');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          history.push('/sign-in');\r\n        });\r\n    }\r\n  }\r\n\r\n  function handleAuthState(state) {\r\n    setAuthState(state);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header\r\n          loggedIn={loggedIn}\r\n          userData={userData}\r\n          onSignOut={handleSignOut}\r\n          authState={authState}\r\n        />\r\n        <Switch>\r\n          <ProtectedRoute\r\n            exact path=\"/\"\r\n            loggedIn={loggedIn}\r\n            component={Main}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            onCardLike={handleCardLike}\r\n            cards={cards}\r\n            onCardDelete={handleConfirm}\r\n            isLoading={isLoadingLoader}\r\n          />\r\n          <Route path=\"/sign-up\">\r\n            <Register\r\n              name=\"register\"\r\n              onRegister={handleRegister}\r\n              isLoading={isLoading}\r\n              onAuthState={handleAuthState}\r\n            />\r\n          </Route>\r\n          <Route path=\"/sign-in\">\r\n            <Login\r\n              name=\"login\"\r\n              onLogin={handleLogin}\r\n              isLoading={isLoading}\r\n              onAuthState={handleAuthState}\r\n            />\r\n          </Route>\r\n          <Route>\r\n            {loggedIn ? <Redirect to=\"/\"/> : <Redirect to=\"/sign-in\"/>}\r\n          </Route>\r\n        </Switch>\r\n        <Footer/>\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          isLoading={isLoading}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlace}\r\n          isLoading={isLoading}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          isLoading={isLoading}\r\n        />\r\n        <ConfirmPopup\r\n          isOpen={isConfirmPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onCardDelete={handleCardDelete}\r\n          isLoading={isLoading}\r\n        />\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipPopupOpen}\r\n          onClose={closeAllPopups}\r\n          isSuccess={isSuccess}\r\n        />\r\n        <ImagePopup\r\n          isOpen={isImgPopupOpen}\r\n          onClose={closeAllPopups}\r\n          card={selectedCard}\r\n        />\r\n      </CurrentUserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App/>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}